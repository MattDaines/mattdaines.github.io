<!doctype html><html lang=en-gb dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Function Apps # A brain dump covering content on function apps.
Securing PaaS services when using a Linux based Consumption Plan # At the time of writing, OutboundIPAddress or PossibleOutboundIPAddress does not seem to be used for app service plans that use a Linux based consumption plan (Y1). Unfortuneatly, the consumption sku also does not support virtual network integration. This means that there doesn&rsquo;t appear to be a way to secure the network layer between a function app and a PaaS service that it consumes; such as a blob endpoint on a storage account (where the function is actually stored)."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://notebook.mattdaines.me/docs/azure/function-apps/"><title>Function Apps | A Technologists Notebook</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.a82d7e77ceb134d151c4d7e381eeb30623fbd5a524d58c584d8716ecec0205bd.css integrity="sha256-qC1+d86xNNFRxNfjge6zBiP71aUk1YxYTYcW7OwCBb0=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.78166b9d46e23e0ea915cb6887a30b633e7bc4fad10c8b6b9f6fa532271c19ba.js integrity="sha256-eBZrnUbiPg6pFctoh6MLYz57xPrRDItrn2+lMiccGbo=" crossorigin=anonymous></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script>
<link rel=alternate type=application/rss+xml href=https://notebook.mattdaines.me/docs/azure/function-apps/index.xml title="A Technologists Notebook"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>A Technologists Notebook</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/posts/>Blog</a></li></ul><ul><li class=book-section-flat><span>Azure</span><ul><li><input type=checkbox id=section-5af928e2e13b08bb5ba8b95f2735e581 class=toggle>
<label for=section-5af928e2e13b08bb5ba8b95f2735e581 class="flex justify-between"><a href=/docs/azure/authentication/>Authentication</a></label><ul><li><a href=/docs/azure/authentication/as-a-service-principal/>As a Service Principal</a></li></ul></li><li><input type=checkbox id=section-9cc4937930d3b321c131f7a571ac2f51 class=toggle checked>
<label for=section-9cc4937930d3b321c131f7a571ac2f51 class="flex justify-between"><a href=/docs/azure/function-apps/ class=active>Function Apps</a></label><ul></ul></li></ul></li><li class=book-section-flat><span>Windows</span><ul><li><input type=checkbox id=section-1febaf06cb5733039fca441a8642b609 class=toggle>
<label for=section-1febaf06cb5733039fca441a8642b609 class="flex justify-between"><a href=/docs/windows/security/>Security</a></label><ul></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Function Apps</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#function-apps>Function Apps</a><ul><li><a href=#securing-paas-services-when-using-a-linux-based-consumption-plan>Securing PaaS services when using a Linux based Consumption Plan</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=function-apps>Function Apps
<a class=anchor href=#function-apps>#</a></h1><p>A brain dump covering content on function apps.</p><dl></dl><h2 id=securing-paas-services-when-using-a-linux-based-consumption-plan>Securing PaaS services when using a Linux based Consumption Plan
<a class=anchor href=#securing-paas-services-when-using-a-linux-based-consumption-plan>#</a></h2><p>At the time of writing, <code>OutboundIPAddress</code> or <code>PossibleOutboundIPAddress</code> does not seem to be used for app service plans that use a Linux based consumption plan (<code>Y1</code>). Unfortuneatly, the consumption sku also does not support virtual network integration. This means that there doesn&rsquo;t appear to be a way to secure the network layer between a function app and a PaaS service that it consumes; such as a blob endpoint on a storage account (where the function is actually stored). Microsoft Learn documentation appears to contradict itself -
<a href="https://learn.microsoft.com/en-us/azure/azure-functions/ip-addresses?tabs=portal#find-outbound-ip-addresses">Find Outbound IP addresses</a> (see below for extract).</p><div class=book-expand><label><div class="book-expand-head flex justify-between"><span>Expand</span>
<span>â†•</span></div><input type=checkbox class=hidden><div class="book-expand-content markdown-inner"><h3 id=function-app-outbound-ip-addresses>Function app outbound IP addresses
<a class=anchor href=#function-app-outbound-ip-addresses>#</a></h3><p>&ldquo;Any outbound connection from a function, such as to a back-end database, uses one of the available outbound IP addresses as the origin IP address&rdquo;</p><p>&ldquo;The set of outboundIpAddresses is currently available to the function app. The set of possibleOutboundIpAddresses includes IP addresses that will be available only if the function app scales to other pricing tiers.&rdquo;</p><p><strong><em>However</em></strong> there is also this on the same page:</p><p>&ldquo;When a function app that runs on the Consumption plan or the Premium plan is scaled, a new range of outbound IP addresses may be assigned. When running on either of these plans, you can&rsquo;t rely on the reported outbound IP addresses to create a definitive allowlist. To be able to include all potential outbound addresses used during dynamic scaling, you&rsquo;ll need to add the entire data center to your allowlist.&rdquo;</p><p>So I have a sneaky feeling that <code>OutboundIPAddress</code> and <code>PossibleOutboundIPAddress</code> are not used at all for function apps; though it&rsquo;s not clear.</p></div></label></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/MattDaines/mattdaines.github.io/commit/54130f60fd1bf628a9a0a03082b5a30fc18b2552 title='Last modified by Matthew Daines | April 20, 2023' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>April 20, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#function-apps>Function Apps</a><ul><li><a href=#securing-paas-services-when-using-a-linux-based-consumption-plan>Securing PaaS services when using a Linux based Consumption Plan</a></li></ul></li></ul></nav></div></aside></main></body></html>